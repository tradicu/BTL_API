
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutChiTiet.cshtml";
}

<!--Truyền dữ liệu viewbag sang js-->
<div id="mydata" data-place="@ViewBag.Place" data-lon="@ViewBag.lon" data-lat="@ViewBag.lat"></div>

<script src="~/WeatherServices/CurrentWeatherDetail.js"></script>

<div class="container my-3" style="height: auto !important;">
    <section class="bg-weather-primary section-current" style="height: auto !important;">
        <div class="row">
            <div class="col-12 col-md-8">
                <div class="ps-3 py-3">
                    <div class="user-current-location py-3">
                        <div class="user-current-location-title">
                            <h1>
                                <!--Location-->
                                <a id="location" href="@Url.Action("Index", "ThoiTiet", new {place = @ViewBag.Place})"></a>
                            </h1>
                        </div>
                        <div class="d-flex flex-wrap">
                            <div id="image-div" class="overview-current">
                                @*<img src="https://file.thoitiet.edu.vn/thoitietedu/icons/04d@2x.png" alt="Mây cụm">*@
                                <!-- Current Temp-->
                                <span id="current-temp" class="current-temperature"></span>
                            </div>
                            <div class="overview-caption mx-3">
                                <!-- Description -->
                                <p id="text" class="overview-caption-item overview-caption-item-detail"></p>
                                <!-- Feels like -->
                                <p id="feels_like" class="overview-caption-item overview-caption-summary-detail"></p>
                            </div>
                        </div>
                        <div class="d-flex flex-wrap justify-content-between weather-detail weather-location mt-2">
                            <div class="d-flex weather-detail-location">
                                <div class="avatar">
                                    <div class="avatar-img rounded-circle">
                                        <svg class="WeatherDetailsListItem--icon--NgMGn Icon--icon--2AbGu Icon--darkTheme--2U1o8" set="current-conditions" name="temp" theme="dark" data-testid="Icon" aria-hidden="true" role="img" viewBox="0 0 24 24">
                                            <title>Nhiệt độ</title>
                                            <path d="M10.333 15.48v.321c.971.357 1.667 1.322 1.667 2.456 0 1.438-1.12 2.604-2.5 2.604S7 19.695 7 18.257c0-1.134.696-2.099 1.667-2.456v-.322a2.084 2.084 0 0 1-1.25-1.91V5.583a2.083 2.083 0 1 1 4.166 0v7.986c0 .855-.514 1.589-1.25 1.91zM15.8 8.1a2.8 2.8 0 1 1 0-5.6 2.8 2.8 0 0 1 0 5.6zm0-1.85a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="flex-1 pt-1 ml-2 weather-detail-location-item">
                                    <span class="fw-bold mb-1">Thấp/Cao</span>
                                    <div class="d-flex ml-auto align-items-center">
                                        <!-- Min max temp here-->
                                        <span id="min_max_temp" class="text-white op-8 fw-bold"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex weather-detail-location">
                                <div class="avatar">
                                    <div class="avatar-img rounded-circle">
                                        <span class="weather-icon">
                                            <i class="bi bi-droplet"></i>
                                        </span>
                                    </div>
                                </div>
                                <div class="flex-1 pt-1 ml-2 weather-detail-location-item">
                                    <span class="fw-bold mb-1">Độ ẩm</span>
                                    <div class="d-flex ml-auto align-items-center">
                                        <!-- Humidity-->
                                        <span id="humidity" class="text-white op-8 fw-bold"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex weather-detail-location">
                                <div class="avatar">
                                    <div class="avatar-img rounded-circle">
                                        <svg class="WeatherDetailsListItem--icon--NgMGn Icon--icon--2AbGu Icon--darkTheme--2U1o8" set="current-conditions" name="visibility" theme="dark" data-testid="Icon" aria-hidden="true" role="img" width="1024" height="1024" viewBox="0 0 1024 1024"><title>Tầm nhìn</title><path d="M491.856 879.808c-60.48-5.056-110.848-25.184-171.328-55.424-120.96-55.424-216.704-146.112-292.256-256.96-25.248-40.352-30.24-80.64 0-126.016 80.608-115.872 186.464-211.68 317.472-272.096 110.816-50.4 226.752-50.4 337.664 0 136 60.48 241.824 156.224 317.44 282.208 15.104 25.216 25.12 65.504 10.048 85.728-105.792 191.424-256.992 367.84-519.04 342.56zm292.256-377.92c0-151.168-120.96-272.064-272.096-272.064-146.144 0-272.128 126.016-272.128 272.064 0 151.232 120.96 277.216 272.128 277.216 151.104-.032 272.096-125.984 272.096-277.216z"></path><path d="M789.808 500.416c0 156.896-125.472 287.52-282.336 282.336-156.864 0-282.336-130.656-282.336-287.488 0-146.4 130.656-277.12 282.336-277.12 156.896-.032 287.584 125.376 282.336 282.272zM512.752 348.832c-83.68 0-151.584 67.968-151.584 151.584 0 88.864 67.968 156.896 151.584 156.896 83.648 0 156.832-73.216 156.832-156.896-5.184-83.648-73.152-151.584-156.832-151.584z"></path></svg>
                                    </div>
                                </div>
                                <div class="flex-1 pt-1 ml-2 weather-detail-location-item">
                                    <span class="fw-bold mb-1">Tầm nhìn</span>
                                    <div class="d-flex ml-auto align-items-center">
                                        <!-- Vision-->
                                        <span id="vis_km" class="text-white op-8 fw-bold">9 km</span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex weather-detail-location">
                                <div class="avatar">
                                    <div class="avatar-img rounded-circle">
                                        <svg class="WeatherDetailsListItem--icon--NgMGn Icon--icon--2AbGu Icon--darkTheme--2U1o8" set="current-conditions" name="wind" theme="dark" data-testid="Icon" aria-hidden="true" role="img" viewBox="0 0 24 24"><title>Wind</title><path d="M6 8.67h5.354c1.457 0 2.234-1.158 2.234-2.222S12.687 4.4 11.354 4.4c-.564 0-1.023.208-1.366.488M3 11.67h15.54c1.457 0 2.235-1.158 2.235-2.222S19.873 7.4 18.54 7.4c-.747 0-1.311.365-1.663.78M6 15.4h9.389c1.457 0 2.234 1.159 2.234 2.223 0 1.064-.901 2.048-2.234 2.048a2.153 2.153 0 0 1-1.63-.742" stroke-width="2" stroke="currentColor" stroke-linecap="round" fill="none"></path></svg>
                                    </div>
                                </div>
                                <div class="flex-1 pt-1 ml-2 weather-detail-location-item">
                                    <span class="fw-bold mb-1">Gió</span>
                                    <div class="d-flex ml-auto align-items-center">
                                        <!-- Wind speed -->
                                        <span id="wind_kph" class="text-white op-8 fw-bold">16.67 km/h</span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex weather-detail-location">
                                <div class="avatar">
                                    <div class="avatar-img rounded-circle">
                                        <svg class="WeatherDetailsListItem--icon--NgMGn Icon--icon--2AbGu Icon--darkTheme--2U1o8" set="current-conditions" name="dewpoint" theme="dark" data-testid="Icon" aria-hidden="true" role="img" viewBox="0 0 24 24"><title>Điểm ngưng</title><path d="M17 8.1a2.8 2.8 0 1 1 0-5.6 2.8 2.8 0 0 1 0 5.6zm0-1.85a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path><path fill-rule="evenodd" d="M9.743 18.912a4.182 4.182 0 0 1-2.928-1.182 3.972 3.972 0 0 1-.614-4.962.743.743 0 0 1 .646-.349c.234 0 .476.095.66.275l4.467 4.355c.385.376.39.998-.076 1.275a4.216 4.216 0 0 1-2.155.588M9.855 5c.316 0 .61.14.828.395.171.2.36.416.562.647 1.857 2.126 4.965 5.684 4.965 8.73 0 3.416-2.85 6.195-6.353 6.195-3.505 0-6.357-2.78-6.357-6.195 0-3.082 2.921-6.406 4.854-8.605.242-.275.47-.535.673-.772C9.245 5.14 9.54 5 9.855 5"></path></svg>
                                    </div>
                                </div>
                                <div class="flex-1 pt-1 ml-2 weather-detail-location-item">
                                    <span class="fw-bold mb-1">Điểm ngưng</span>
                                    <div class="d-flex ml-auto align-items-center">
                                        <span class="text-white op-8 fw-bold">25 °</span>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex weather-detail-location">
                                <div class="avatar">
                                    <div class="avatar-img rounded-circle">
                                        <svg class="WeatherDetailsListItem--icon--NgMGn Icon--icon--2AbGu Icon--darkTheme--2U1o8" set="current-conditions" name="uv" theme="dark" data-testid="Icon" aria-hidden="true" role="img" viewBox="0 0 24 24"><title>UV Level</title><path d="M7.4 5.598a.784.784 0 0 1 .25-.92c.335-.256.824-.197 1.02.062.066.063.066.063.08.085l2.406 3.152-.626.238a3.983 3.983 0 0 0-1.097.633l-.522.424L7.4 5.598zm4.539 2.358c-.21 0-.418.017-.625.05l-.664.106.09-.666.438-3.266c.013-.072.013-.072.012-.057a.783.783 0 0 1 .666-.616.78.78 0 0 1 .872.639l.006.038.507 3.933-.662-.108a3.957 3.957 0 0 0-.64-.053zm-7.781 3.19l.026-.004 3.934-.507-.108.662a3.98 3.98 0 0 0-.003 1.266l.105.664-.665-.09-3.265-.439a.784.784 0 0 1-.676-.679c-.054-.42.238-.809.63-.869l.022-.004zm11.504-.617a3.98 3.98 0 0 0-.632-1.097l-.425-.522.623-.256 3.056-1.256a.787.787 0 0 1 .916.253c.256.337.199.817-.104 1.063l-.045.037-3.151 2.405-.238-.627zm-1.205-1.672a3.984 3.984 0 0 0-1.095-.637l-.626-.24.41-.532 2.008-2.602c.059-.07.059-.07.046-.052a.78.78 0 0 1 1.306.227c.076.185.079.39.02.54l-.021.06-1.528 3.662-.52-.426zM4.595 7.793c.162-.387.611-.58.971-.441.017.004.017.004.055.02L9.283 8.9l-.425.52a3.985 3.985 0 0 0-.636 1.094l-.24.627-3.144-2.425a.784.784 0 0 1-.243-.924zm14.443 7.367c.054.045.054.045.044.04a.784.784 0 0 1 .199.884c-.163.386-.61.58-.964.443-.024-.006-.024-.006-.062-.022l-3.662-1.529.426-.52a3.98 3.98 0 0 0 .636-1.094l.241-.626 3.142 2.424zm1.332-3.303c.053.422-.239.809-.63.87l-.035.006-3.945.508.108-.662a3.999 3.999 0 0 0 .003-1.266l-.105-.663.665.09 3.272.44c.068.012.068.012.052.01a.784.784 0 0 1 .615.667zm-3.894 6.421c.024.068.024.068.017.053a.786.786 0 0 1-.27.87c-.332.25-.816.194-1.047-.091-.022-.023-.022-.023-.05-.058l-2.406-3.154.626-.237a3.977 3.977 0 0 0 1.097-.632l.523-.425 1.51 3.674zm-8.26-4.932c.151.397.365.767.633 1.097l.424.522-.622.256-3.054 1.255a.787.787 0 0 1-.92-.25.781.781 0 0 1-.154-.58c.027-.199.127-.379.227-.452.045-.046.045-.046.075-.069l3.153-2.406.238.627zm3.723 2.572c.209 0 .417-.016.625-.049l.662-.103-.089.664-.438 3.26-.012.062a.785.785 0 0 1-.666.618c-.048.005-.048.005-.101.006-.386 0-.714-.28-.764-.612-.01-.043-.01-.043-.014-.072l-.507-3.934.662.108c.213.035.427.052.642.052zM7.366 18.27l.006-.015L8.9 14.592l.52.426a3.99 3.99 0 0 0 1.094.636l.626.241-.41.531-2.012 2.609-.04.046a.788.788 0 0 1-.886.2.787.787 0 0 1-.428-1.011z"></path><path d="M11.911 14.322a2.411 2.411 0 1 0 0-4.822 2.411 2.411 0 0 0 0 4.822zm0 2a4.411 4.411 0 1 1 0-8.822 4.411 4.411 0 0 1 0 8.822z"></path></svg>
                                    </div>
                                </div>
                                <div class="flex-1 pt-1 ml-2 weather-detail-location-item">
                                    <span class="fw-bold mb-1">UV</span>
                                    <div class="d-flex ml-auto align-items-center">
                                        <!-- UV -->
                                        <span id="uv" class="text-white op-8 fw-bold">7.45</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="col-12 col-md-4">
                <h2 class="font-h2 text-white px-2 pt-2">Nhiệt độ</h2>
                <div class="list-weather list-weather-location">
                    <div class="nav-scroller py-1 mb-2">
                        <nav id="NgayDemSangToi" class="nav">
                            <!--Ngày-->
                            <div class="weather-item">
                                <h4 class="weather-item-title">
                                    <span>Ngày</span>
                                </h4>
                                <div class="weather-item-body">
                                    <img src="~/resource/img/Ngay.png" alt="Nhiệt độ ban ngày">
                                </div>
                                <div class="weather-item-footer">
                                    <span id="temp_ngay"></span>
                                </div>
                            </div>
                            <!--Đêm-->
                            <div class="weather-item">
                                <h4 class="weather-item-title">
                                    <span>Đêm</span>
                                </h4>
                                <div class="weather-item-body">
                                    <img src="~/resource/img/Dem.png" alt="Nhiệt độ ban đêm">
                                </div>
                                <div class="weather-item-footer">
                                    <span id="temp_dem"></span>
                                </div>
                            </div>
                            <!--Sáng-->
                            <div class="weather-item">
                                <h4 class="weather-item-title">
                                    <span>Sáng</span>
                                </h4>
                                <div class="weather-item-body">
                                    <img src="~/resource/img/Sang.png" alt="Nhiệt độ buổi sáng">
                                </div>
                                <div class="weather-item-footer">
                                    <span id="temp_sang"></span>
                                </div>
                            </div>
                            <!--Tối-->
                            <div class="weather-item">
                                <h4 class="weather-item-title">
                                    <span>Tối</span>
                                </h4>
                                <div class="weather-item-body">
                                    <img src="~/resource/img/Toi.png" alt="Nhiệt độ buổi tối">
                                </div>
                                <div class="weather-item-footer">
                                    <span id="temp_toi"></span>
                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<div class="container" style="height: auto !important;">
    <div class="row" style="height: auto !important;">
        <div class="col-12 col-md-8">
            <!--Thời tiết 48h-->
            <div class="card">
                <div class="card-body">
                    <h2 class="card-title font-h2">
                        Thời tiết @ViewBag.Place theo giờ
                    </h2>
                    <div class="list-weather">
                        <div class="nav-scroller py-1 mb-2" style="height: 255px;">
                            <nav id="weather_48h" class="nav">
                                <!-- 48h -->
                            </nav>
                        </div>
                    </div>
                    <div>
                        <a href="@Url.Action("TheoGio", "ThoiTiet", new {place=ViewBag.Place, lon=ViewBag.lon, lat=ViewBag.lat})" class="btn btn-outline-primary">Thời tiết 48h</a>
                    </div>
                </div>
            </div>
            <!--Thời tiết 3 ngày tới-->
            <div class="card mt-3">
                <div class="card-body">
                    <h2 class="card-title font-h2">
                        Thời tiết @ViewBag.Place những ngày tới
                    </h2>
                    <div id="Weather_3days">
                        <!--Thời tiết 3 ngày-->
                    </div>

                    <!--Menu-->
                    <ul class="nav w-100 nav-pills nav-fill mt-2">
                        <li class="nav-item mb-1">
                            <a class="btn btn-outline-primary" href="@Url.Action("NgayMai", "ThoiTiet", new {place=ViewBag.Place, lon=ViewBag.lon, lat=ViewBag.lat})">
                                Ngày mai
                            </a>
                        </li>
                        <li class="nav-item mb-1">
                            <a class="btn btn-outline-primary" href="@Url.Action("BaNgayToi", "ThoiTiet", new {place=ViewBag.Place, lon=ViewBag.lon, lat=ViewBag.lat})">
                                3 ngày tới
                            </a>
                        </li>
                        <li class="nav-item mb-1">
                            <a class="btn btn-outline-primary" href="@Url.Action("NamNgayToi", "ThoiTiet", new {place=ViewBag.Place, lon=ViewBag.lon, lat=ViewBag.lat})">
                                5 ngày tới
                            </a>
                        </li>

                    </ul>
                </div>
            </div>
            <!--Biểu đồ-->
            <div class="card mt-3">
                <div class="card-body">
                    <h2 class="font-h2">
                        Khả năng có mưa @ViewBag.Place 48h
                    </h2>
                    <div class="chart-container bg-white">
                        <div id="chart1" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
                        <script src="https://cdnjs.cloudflare.com/ajax/libs/highcharts/10.3.3/highcharts.js" integrity="sha512-8cJ3Lf1cN3ld0jUEZy26UOg+A5YGLguP6Xi6bKLyYurrxht+xkLJ9oH9rc7pvNiYsmYuTvpe3wwS6LriK/oWDg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                    </div>
                </div>
            </div>
            <div class="card mt-3">
                <div class="card-body">
                    <h2 class="font-h2">
                        Nhiệt độ @ViewBag.Place 48h
                    </h2>
                    <div class="chart-container bg-white">
                        <div id="chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
                        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js" integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-12 col-md-4" style="height: auto !important;">
            <!--Chất lượng không khí-->
            <div class="card">
                <div class="card-body">
                    <h2 class="text-center font-h2"><span class="badge bg-primary p-2">Chất lượng không khí</span></h2>
                    <div class="alert-success alert">
                        <div class="row">
                            <div class="col-12 col-md-3">
                                <span class="air-api d-block text-center" data-bs-original-title="" title="" id="text_kk">

                                </span>
                            </div>
                            <div class="col-12 col-md-9" id="description_kk">

                            </div>
                        </div>
                    </div>
                    <div class="d-flex flex-wrap justify-content-between weather-detail mt-2 air-components">
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">CO</span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="co"></span>
                            </div>
                        </div>
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">NO<sub>2</sub></span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="no2"></span>
                            </div>
                        </div>
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">O<sub>3</sub></span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="o3"></span>
                            </div>
                        </div>
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">SO<sub>2</sub></span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="so2"></span>
                            </div>
                        </div>
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">PM<sub>25</sub></span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="pm25"></span>
                            </div>
                        </div>
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">PM<sub>10</sub></span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="pm10"></span>
                            </div>
                        </div>
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">AQI</span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="AQI"></span>
                            </div>
                        </div>
                        <div class="flex-1 pt-1 ml-2">
                            <span class="fw-bold mb-1">DAQI</span>
                            <div class="d-flex ml-auto align-items-center">
                                <span class="op-8 fw-bold" id="DAQI"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--Bình minh - hoàng hôn-->
            <div class="card mt-3 sunrise" style="background-image:url(../resource/img/sunrise-sunset-bg.jpg)">
                <div class="card-body">
                    <h2 class="font-h2">
                        Bình minh / Hoàng hôn
                    </h2>
                    <div class="d-flex justify-content-between">
                        <div class="sun-item">
                            <span id="sunrise"></span>
                        </div>
                        <div class="sun-item">
                            <span id="sunset"></span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Windy -->
            <div class="mt-3">
                <iframe width="100%" height="350" src="https://embed.windy.com/embed2.html?lat=21.116671&amp;
                        lon=105.883331&amp;detailLat=21.116671&amp;detailLon=105.883331&amp;width=100%25&amp;
                        height=450&amp;zoom=7&amp;level=surface&amp;overlay=wind&amp;product=ecmwf&amp;menu=&amp;
                        message=true&amp;marker=true&amp;calendar=now&amp;pressure=true&amp;type=map&amp;location=coordinates&amp;
                        detail=&amp;metricWind=default&amp;metricTemp=%C2%B0C&amp;radarRange=-1" frameborder="0"></iframe>
            </div>
            <!-- Tin tức mới nhất -->
            <div class="mt-2">
                <div class="current-location top-news">
                    <div class="d-flex justify-content-between">
                        <h2 class="font-h2">
                            Tin tức mới nhất
                        </h2>
                        <a href="@Url.Action("Index", "TinTuc")" class="text-white-50">
                            Xem tất cả
                        </a>
                    </div>
                    <ul id="hot_news" class="list-unstyled list-top-news">
                        <!-- News Display here-->
                    </ul>
                </div>

            </div>
        </div>
    </div>
</div>


<!-- import file js-->
<script src="~/WeatherServices/CurrentWeatherDetail.js"></script>
<script src="~/NewsServices/News.js"></script>
